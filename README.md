	token = "fbJAVkPjgvtIpFh9WABxHPk712eQFbaX";
		
    ТелоЗапроса = Новый Структура;
    ТелоЗапроса.Вставить("model", "mistral-small-latest");
	
	Сообщения = новый Массив;
	Сообщение = новый Структура;
	Сообщение.Вставить("role", "user");
	Promt = СтрШаблон("Сгенерируй %1 слуйчаных номенклатур с видом производства %2 в количестве . Ответ верни в формате Json, без лишнего текста", Количество, ВидПроизвоства);
	Сообщение.Вставить("content", Promt);  
	Сообщения.Добавить(Сообщение);
	
	ТелоЗапроса.Вставить("messages", Сообщения);
	 
	ПараметрыJSON    = Новый ПараметрыЗаписиJSON(ПереносСтрокJSON.Нет, " " , Истина, ЭкранированиеСимволовJSON.Нет, Ложь, Ложь, Ложь, Ложь);
	ЗаписьJSON        = Новый ЗаписьJSON;
	ЗаписьJSON.ПроверятьСтруктуру = Истина;
	ЗаписьJSON.УстановитьСтроку(ПараметрыJSON); 
	
	ЗаписатьJSON(ЗаписьJSON, ТелоЗапроса);
	ЗапросJSON = ЗаписьJSON.Закрыть();	
	
	// Отправка запроса      
	Заголовки = новый Соответствие;
	Заголовки.Вставить("Authorization", "Bearer " + token); 
	Заголовки.Вставить("Content-Type", "application/json");

	HTTPЗапрос = Новый HTTPЗапрос("/v1/chat/completions",Заголовки);    	
	
    HTTPЗапрос.УстановитьТелоИзСтроки(ЗапросJSON, КодировкаТекста.UTF8);
	
    HTTPСоединение = Новый HTTPСоединение("api.mistral.ai", 443, , , , 100,новый ЗащищенноеСоединениеOpenSSL());
	HTTPОтвет = HTTPСоединение.ВызватьHTTPМетод("POST", HTTPЗапрос);
	
	
    Если HTTPОтвет.КодСостояния = 200 Тогда
        // Чтение ответа
        ЧтениеJSON = Новый ЧтениеJSON;
        ЧтениеJSON.УстановитьСтроку(HTTPОтвет.ПолучитьТелоКакСтроку(КодировкаТекста.UTF8));
        Результат = ПрочитатьJSON(ЧтениеJSON);
        
		НоменклатураJSON = СтрЗаменить(Результат.choices[0].message.content,"```json" + Символы.ПС,"");
		ЧтениеJSON = новый ЧтениеJSON;
		ЧтениеJSON.УстановитьСтроку(НоменклатураJSON);
		Табличка = ПрочитатьJSON(ЧтениеJSON,Ложь);
		//МассивДанных = ЧтениеJSON.Прочитать();
		ЧтениеJSON.Закрыть();
		
		Номенклатуры.Очистить();
		Для Каждого Стр из Табличка Цикл
			НоваяСтр = Номенклатуры.Добавить();
			НоваяСтр.Номенклатура = Стр.Номенклатура;
			НоваяСтр.ВидПроизводства = Стр.вид_производства;
		КонецЦикла;
		
	Иначе
        ВызватьИсключение "Ошибка API: " + HTTPОтвет.ПолучитьТелоКакСтроку();
    КонецЕсли;


https://infostart.ru/1c/articles/1116527/
